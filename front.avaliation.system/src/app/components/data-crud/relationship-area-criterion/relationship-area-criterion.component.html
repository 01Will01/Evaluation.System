<div class="body-collaborator">
    <div *ngIf="statusLoading">
        <div id="screen-protect" *ngIf="statusLoading"></div>
        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
    </div>

    <div class="show-action" *ngIf="statusConfirmAction">
        <div id="screen-protect-action"></div>
        <div class="confirm-action">
            <div id="mesage-action">
                {{messageAction}}
            </div>
            <div id="buttons-confirm-action">
                <a (click)="getValueAction(true)" id="buttons-action"> Sim </a>
                <a (click)="getValueAction(false)" id="buttons-action"> Não </a>
            </div>
        </div>
    </div>

    <div class="show-action" *ngIf="statusConfirmActionWeight">
        <div id="screen-protect-action"></div>
        <div class="confirm-action-weight">
            <div id="mesage-action-weight">
                {{messageAction}}
            </div>
            <div id="buttons-confirm-action-weight">
                <mat-radio-group id="group-weight" [(ngModel)]="valueWeight" requerid>
                    <mat-radio-button [checked]="true" color="warn" value=1>Normal - valor = 1</mat-radio-button>
                    <mat-radio-button color="warn" value=2> Relevante - valor = 2</mat-radio-button>
                    <mat-radio-button color="warn" value=3> Exigido - valor = 3</mat-radio-button>
                </mat-radio-group>
            </div>
            <div id="buttons-confirm-action-weight">
                <a (click)="getValueAction(true)" id="buttons-action"> Definir </a>
            </div>
        </div>
    </div>

    <div class="container-collaborator">

        <div class="navbar">

            <a title="Lista" (click)="showTable()" *ngIf="!statusShowTable"><i class="fa fa-pencil-square-o fa-2x" aria-hidden="true" ></i></a>

        </div>

        <div class="contents">

            <div class="message-success" *ngIf="statusSuccess">
                {{messageSuccess}}
            </div>

            <div class="group-collaborator" *ngIf="statusShowTable">

                <div class="form-group" id="input-filter">
                    <label> Filtro </label>
                    <input matInput (keyup)="applyFilter($event)" placeholder="Ex. Desenvolvimento" #input>
                </div>

                <div class="list" id="style-1">
                    <table mat-table [dataSource]="dataSourceArea">

                        <ng-container matColumnDef="name">
                            <th mat-header-cell *matHeaderCellDef> Área </th>
                            <td mat-cell *matCellDef="let element" (click)="getLine(element)"> {{element.name}} </td>
                        </ng-container>

                        <tr mat-header-row *matHeaderRowDef="displayedColumnsArea"></tr>
                        <tr mat-row *matRowDef="let row; columns: displayedColumnsArea;"></tr>
                    </table>
                </div>

                <span class="required" *ngIf="statusMessage">
                    <div *ngFor="let message of messages">
                        {{ message }}
                    </div>
                </span>
            </div>

            <div class="input" *ngIf="statusShowInput">

                <h4> Modificar</h4>
                <h4> {{formInput.controls.AreaName.value}}</h4>

                <div class="register">
                    <form [formGroup]="formInput" style="width: 100%;">
                        <div class="form-group" id="input-register">

                            <div id="group-select">
                                <div id="select">
                                    <mat-form-field appearance="fill" style="font-weight: bold; font-size: small;" required>
                                        <mat-label>Área</mat-label>
                                        <mat-select formControlName="AreaId" required>
                                            <mat-option>
                                                <app-pipes-search [formControl]="areaFilterCtrl"></app-pipes-search>
                                            </mat-option>

                                            <mat-option *ngFor="let area of filteredArea | async" [value]="area.id"> {{area.name}} </mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                    <span class="required" *ngIf="!formInput.controls.AreaId.valid && formInput.controls.AreaId.touched">Campo Obrigatório</span>
                                </div>
                            </div>

                            <div id="action-register">
                                <button type="submit" (click)="inputRegister()"> <a id="save-register" title="Salvar"><i class="fa fa-floppy-o fa-2x" aria-hidden="true"></i></a></button>
                            </div>
                            <span class="required" *ngIf="statusMessage">
                                <div *ngFor="let message of messages">
                                    {{ message }}
                                </div>
                            </span>

                            <div class="group-table" *ngIf="formInput.controls.AreaId.valid">
                                <div class="group-evaluator">
                                    <h5> Critérios confirmados </h5>

                                    <div class="form-group" id="input-filter">
                                        <label> Filtro </label>
                                        <input matInput (keyup)="applyAreaCriterionFilter($event)" placeholder="Ex. Nome" #input>
                                    </div>

                                    <div class="list-criterion" id="style-1">
                                        <table mat-table [dataSource]="dataSourceAreaCriterion" class="table-evaluator">

                                            <ng-container matColumnDef="criterionName">
                                                <th mat-header-cell *matHeaderCellDef> Critério </th>
                                                <td mat-cell *matCellDef="let element"> {{element.criterionName}} </td>
                                            </ng-container>

                                            <ng-container matColumnDef="weight">
                                                <th mat-header-cell *matHeaderCellDef> Peso </th>
                                                <td mat-cell *matCellDef="let element"> {{element.weight}} </td>
                                            </ng-container>

                                            <ng-container matColumnDef="update">
                                                <th mat-header-cell *matHeaderCellDef></th>
                                                <td mat-cell *matCellDef="let row" id="register-button" (click)="change(row)">
                                                    <a> Editar </a>
                                                </td>
                                            </ng-container>

                                            <ng-container matColumnDef="remove">
                                                <th mat-header-cell *matHeaderCellDef></th>
                                                <td mat-cell *matCellDef="let row" id="delete-button" (click)="remove(row)">
                                                    <a> Retirar </a>
                                                </td>
                                            </ng-container>

                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsAreaCriterion"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsAreaCriterion;"></tr>
                                        </table>
                                    </div>
                                </div>

                                <div class="group-evaluator">
                                    <h5> Critérios não confirmados </h5>

                                    <div class="form-group" id="input-filter">
                                        <label> Filtro </label>
                                        <input matInput (keyup)="applyCriterionFilter($event)" placeholder="Ex. Nome" #input>
                                    </div>

                                    <div class="list-criterion" id="style-1">
                                        <table mat-table [dataSource]="dataSourceCriterion">

                                            <ng-container matColumnDef="name">
                                                <th mat-header-cell *matHeaderCellDef> Critério </th>
                                                <td mat-cell *matCellDef="let element" title="{{element.name}}"> {{element.name}} </td>
                                            </ng-container>

                                            <ng-container matColumnDef="input">
                                                <th mat-header-cell *matHeaderCellDef></th>
                                                <td mat-cell *matCellDef="let row" id="register-button" (click)="add(row)">
                                                    <a> Add </a>
                                                </td>
                                            </ng-container>

                                            <tr mat-header-row *matHeaderRowDef="displayedColumnsCriterion"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumnsCriterion;"></tr>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>